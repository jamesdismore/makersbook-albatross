<!DOCTYPE html>
<html th:fragment="thymeleaf-header"
      xmlns:th="http://www.thymeleaf.org" lang="en"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity5">
<head>
    <meta charset="UTF-8">
    <title>Acebook</title>
    <!-- Latest compiled and minified CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/main.css" />
    <style>
        .error-message {
        color: red;
        font-weight: bold;
        margin-top: 5px;
    }

    input.is-invalid {
        border: 2px solid red;
        background-color: #ffe6e6;
    }
    </style>
</head>
<body>

<div class="container">

    <nav class="navbar navbar-dark bg-dark">
        <a class="navbar-brand" href="#">
            <h2 class="display-4 p-3">New User</h2>
        </a>
    </nav>
    <form th:object="${our_user}" id="add-user-form" method="post" enctype="multipart/form-data">
            <div class="row mt-5 align-content-center">
                <div class="mb-3 text-center">
                    <img id="imagePreview" src="https://www.shutterstock.com/image-vector/blank-avatar-photo-place-holder-600nw-1095249842.jpg"
                         th:src="@{'../images/userAvatars/' + ${avatarFile}}" class="rounded-circle mx-auto"
                         style="width: 240px; height: 240px; object-fit: cover;" alt="Default Avatar">
                </div>

                <div class="row mt-5 align-content-center">
                    <label class="text-center" for="file">Choose a picture:</label>
                    <input type="file" accept="image/*" id="file" name="file"
                           class="form-control mx-auto" style="max-width: 300px;"
                           onchange="previewImage(event)" required>
                </div>

                <div class="col-6 mb-3">
                    <label for="firstNameInput" class="form-label" >First Name</label>
                    <input type="text"  id="firstNameInput" aria-describedby="firstNameHelp" class="form-control form-control" th:field="*{firstName}">
                    <div th:if="${#fields.hasErrors('firstName')}" class="error-message">
                        <div th:errors="*{firstName}"></div>
                    </div>
                </div>

                <div class="col-6 mb-3">
                    <label for="lastNameInput" class="form-label" >Last Name</label>
                    <input type="text"  id="lastNameInput" aria-describedby="lastNameHelp" class="form-control form-control" th:field="*{lastName}">
                    <div th:if="${#fields.hasErrors('lastName')}" class="error-message">
                        <div th:errors="*{lastName}"></div>
                    </div>
                </div>

                <div class="col-6 mb-3">
                    <label for="userNameInput" class="form-label" >Email</label>
                    <input type="text"  id="userNameInput" aria-describedby="userNameHelp" class="form-control bg-light text-muted" th:field="*{username}" readonly>
                    <div th:if="${#fields.hasErrors('username')}" class="error-message">
                        <div th:errors="*{username}"></div>
                    </div>
                </div>

                <div class="col-6 mb-3">
                    <label for="userBirthDateInput" class="form-label" >Date of birth</label>
                    <input type="date"  id="userBirthDateInput" aria-describedby="birthDateHelp" class="form-control form-control" th:field="*{dob}">
                    <div th:if="${#fields.hasErrors('dob')}" class="error-message">
                        <div th:errors="*{dob}"></div>
                    </div>
                </div>

            <div class="form-group">
                <div class="col-sm-offset-2 col-sm-10">
                    <button
                            class="btn btn-primary" type="submit">Submit
                    </button>
                </div>
            </div>
        </div>
        <br>
    </form>

    <script>
        function previewImage(event) {
            const file = event.target.files[0];  // Get the selected file
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    document.getElementById('imagePreview').src = e.target.result; // Set image source
                };
                reader.readAsDataURL(file);
            }
        }
    </script>

</div>

<!-- Latest compiled JavaScript -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>






